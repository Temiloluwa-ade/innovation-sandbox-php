language: php
php:
  - '5.4'
  - '5.6'
  - '7.0'
  - '7.1'
  - '7.2'
  - '7.4'

install:
 - composer install

before_script:
  - curl -sS https://getcomposer.org/installer | php
  - chmod +x ./composer.phar
  - ./composer.phar --version
  - ./composer.phar install --dev

script:
  - vendor/bin/phplint
  - vendor/bin/phpunit

jobs:
  include:
    - stage: packagist
      php: '7.4'
      script: echo 'deploy ready?'
      deploy:
        provider: script
        script: bash scripts/deploy.sh
        on:
          tags: true
          branch: master
